<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
"http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="UserDAO">
<!-- 
   <resultMap id="userResult" type="user">
      <id property="num" column="NUM" />
      <result property="id" column="ID" />
      <result property="pwd" column="PWD" />
      <result property="name" column="NAME" />
      <result property="age" column="AGE" />
      <result property="gender" column="GENDER" />
      <result property="lev" column="LEV" />
      <result property="adr" column="ADR" />
      <result property="email" column="EMAIL" />
      <result property="phone" column="PHONE" />
      <result property="day" column="DAY" />
   </resultMap> -->
   
   <!-- 추가된 부분 -->
	<select id="selectAll" parameterType="kr.co.mood.Product.VO.ProPaginVO" resultType="kr.co.mood.user.dao.UserVO">
   <![CDATA[
      select * from moodjoin where id != 'admin'
      ]]>
      <if test="startNo != null">
      limit #{startNo}, #{endNo}
      </if>
   </select>
   
   	<select id="selectMemberNo" parameterType="kr.co.mood.user.dao.UserVO" resultType="kr.co.mood.user.dao.UserVO">
   <![CDATA[
      select * from moodjoin where no = #{no}
      ]]>
   </select>
   

	 <insert id="insert" parameterType="kr.co.mood.user.dao.UserVO">
      <![CDATA[
      INSERT INTO moodjoin VALUES(no, #{id}, #{pwd}, #{name}, #{age} , #{gender}, concat(#{adr} , #{adr2} , #{adr3}), #{email}, #{phone}, now())
      ]]>
   </insert>

   
   <select id="selectId" parameterType="kr.co.mood.user.dao.UserVO" resultType="kr.co.mood.user.dao.UserVO">
   <![CDATA[
      select * from moodjoin where id=#{id} and pwd=#{pwd}
      ]]>
   </select>
   
   
   <select id="idChk" parameterType="kr.co.mood.user.dao.UserVO" resultType="int">
		<![CDATA[
		select count(*) from moodjoin where id=#{id}
		 ]]>
	</select>
	
	 <insert id="insertnaver" parameterType="kr.co.mood.user.dao.UserVO">
      <![CDATA[
      INSERT INTO moodjoin VALUES(no, #{id}, "", #{name}, #{age} , #{gender}, "", #{email}, "", now())
      ]]>
   </insert>
	
   
   <delete id="delete" parameterType="String" >
		<![CDATA[
		delete from moodjoin where id=#{id} and pwd=#{pwd}
		 ]]>
	</delete>
	
	
    <update id = "update" parameterType="kr.co.mood.user.dao.UserVO">
        update moodjoin
        set id=#{id}, pwd =#{pwd}, name=#{name}, 
        age=#{age}, gender=#{gender}, adr=#{adr}, email=#{email} , phone=#{phone}, day=#{day}
        where id = #{id}
    </update>
	</mapper>
