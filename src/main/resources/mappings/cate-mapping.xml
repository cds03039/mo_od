<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="CateDAO">

	<insert id="insert">

		insert into cate(pro_number, user_no ,amount)
		values(#{pro_number},#{user_no},#{amount}) ON DUPLICATE KEY UPDATE amount = amount+1

	</insert>

	<select id="selectlist" resultType="kr.co.mood.cate.vo.CateVO">

		select cate_id, p.pro_number,
		c.user_no,pro_name ,pro_price,pro_img1,pro_maindesctitle,amount
		from moodjoin m, cate c, product p
		where m.no=c.user_no and c.pro_number = p.pro_number and
		c.user_no=#{userid} order by cate_id
	</select>


	<update id="plusupdate">
		update cate set amount = amount + 1
		where cate_id = #{cate_id}
	</update>
	
	<update id="minusupdate">
		update cate set amount = amount - 1
		where cate_id = #{cate_id}
	</update>
	
	<update id="dupcate">
		select * from cate where user_no = #{user_no} and pro_number = #{pro_number}
	</update>
	
	
</mapper>