<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
"http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="productPaymentDAO">
	
	<insert id="cateorderinsert">
INSERT INTO orderProduct (pro_number, pro_option,orderId, count, price)
SELECT
  pro_number,
  pro_option,
  (SELECT MAX(orderId) FROM moodorder),
  amount,
  total
FROM cate
WHERE user_no = #{userno}
	</insert>
	
	<insert id="insert">
    INSERT INTO orderProduct (pro_number,pro_option,orderId, count, price)
    VALUES (#{pro_number}, #{pro_option},#{orderId}, #{count}+1, #{price})
	</insert>
	


	<select id="selectList" resultType="kr.co.mood.Payment.VO.userOrderProductVO">
		SELECT m.name, m.phone, m.id, m.email, m.adr,
       p.pro_number, p.pro_img1, p.pro_name, p.pro_maindesc, p.pro_maindesctitle, p.pro_price,
       o.userno, o.price ,o.orderId,op.pro_option,count
		FROM moodjoin m, moodorder o, product p, orderProduct op 
		WHERE m.no=o.userNo AND o.orderId=op.orderId AND p.pro_number=op.pro_number 
		and #{orderId} = op.orderId
		ORDER BY op.orderId
	</select> 
	
	
	
	

</mapper>